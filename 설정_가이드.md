# 설문조사 시스템 설정 가이드

## 📋 목차
1. [Google Sheets 및 Apps Script 설정](#1-google-sheets-및-apps-script-설정)
2. [GitHub Pages 배포](#2-github-pages-배포)
3. [QR 코드 생성](#3-qr-코드-생성)
4. [테스트 및 확인](#4-테스트-및-확인)
5. [문제 해결](#5-문제-해결)

---

## 1. Google Sheets 및 Apps Script 설정

### ⏱️ 소요 시간: 약 10분

### 1-1. Google Sheets 생성

1. **Google Sheets 접속**
   ```
   https://sheets.google.com
   ```

2. **새 스프레드시트 생성**
   - 좌측 상단 **"새로 만들기"** 또는 **빈 스프레드시트** 클릭

3. **이름 변경**
   - 좌측 상단 "제목 없는 스프레드시트" 클릭
   - **"설문조사 응답"**으로 변경

### 1-2. Apps Script 코드 배포

1. **Apps Script 열기**
   ```
   스프레드시트 상단 메뉴
   → 확장 프로그램
   → Apps Script
   ```

2. **기본 코드 삭제**
   - 열린 에디터의 모든 코드 삭제 (Ctrl+A → Delete)

3. **코드 붙여넣기**
   - `C:\Users\2025winUJYRFJHLOO46\.claude\google-apps-script.js` 파일 열기
   - 전체 코드 복사 (Ctrl+A → Ctrl+C)
   - Apps Script 에디터에 붙여넣기 (Ctrl+V)

4. **파일명 변경** (선택사항)
   - 좌측 상단 "코드.gs" → **"설문조사.gs"**로 변경

5. **저장**
   - Ctrl+S 또는 상단 💾 아이콘 클릭

### 1-3. 웹 앱으로 배포

1. **배포 시작**
   ```
   우측 상단 "배포" 버튼
   → "새 배포" 선택
   ```

2. **배포 설정**
   - **유형 선택**: ⚙️ 아이콘 클릭 → **웹 앱** 선택
   - **설명**: "설문조사 데이터 수집" (선택사항)
   - **다음 계정으로 실행**: **나**
   - **액세스 권한**: ⚠️ **모든 사용자** (매우 중요!)

3. **배포 실행**
   - **"배포"** 버튼 클릭

4. **권한 승인**
   ```
   "액세스 승인" 클릭
   → Google 계정 선택
   → "고급" 클릭
   → "설문조사(안전하지 않음)로 이동" 클릭
   → "허용" 클릭
   ```

5. **웹 앱 URL 복사**
   ```
   예시:
   https://script.google.com/macros/s/AKfycbzMyANPSIrXF_qV6bFbr7avJzqqSJxMwpyKjOXcb4C4FhM49r3s4w6NHOz1HlkyuRpw/exec
   ```
   - 📋 **반드시 복사해두기!**

### 1-4. survey.html에 URL 추가

#### 방법 1: GitHub에서 직접 수정 (권장)

1. **GitHub 저장소 접속**
2. **survey.html** 파일 클릭
3. **연필 아이콘(Edit)** 클릭
4. **217번째 줄** 근처에서 다음 코드 찾기:
   ```javascript
   const GOOGLE_SCRIPT_URL = 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE';
   ```

5. **복사한 URL로 교체**:
   ```javascript
   const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz.../exec';
   ```
   ⚠️ **작은따옴표('')는 그대로 유지!**

6. **Commit changes** 클릭

#### 방법 2: 로컬 파일 수정 후 재업로드

1. `C:\Users\2025winUJYRFJHLOO46\.claude\survey.html` 파일을 메모장으로 열기
2. 217번째 줄 수정
3. 저장 후 GitHub에 재업로드

---

## 2. GitHub Pages 배포

### ⏱️ 소요 시간: 약 10분

### 2-1. GitHub 저장소 생성

1. **GitHub 로그인**
   ```
   https://github.com
   ```

2. **새 저장소 생성**
   ```
   우측 상단 "+"
   → "New repository" 클릭
   ```

3. **저장소 설정**
   - **Repository name**: `survey-system` (원하는 이름)
   - **Public** 선택 (중요!)
   - ✅ **Add a README file** 체크
   - **Create repository** 클릭

### 2-2. 파일 업로드

1. **저장소 페이지에서**
   ```
   "Add file"
   → "Upload files" 클릭
   ```

2. **파일 선택**
   ```
   C:\Users\2025winUJYRFJHLOO46\.claude\ 폴더에서
   다음 파일들을 선택:

   ✅ login.html
   ✅ survey-list.html
   ✅ admin.html
   ✅ survey.html
   ```

3. **드래그 앤 드롭**
   - 선택한 파일을 GitHub 페이지로 드래그

4. **커밋**
   - Commit message: "Initial commit" (자동 입력됨)
   - **Commit changes** 클릭

### 2-3. GitHub Pages 활성화

1. **Settings 탭 클릭**
   - 저장소 상단 메뉴

2. **Pages 메뉴 선택**
   - 좌측 사이드바에서 "Pages" 클릭

3. **Source 설정**
   - **Branch**: `main` 선택
   - **Folder**: `/ (root)` 선택
   - **Save** 클릭

4. **배포 대기**
   - 2-3분 대기
   - 페이지 새로고침

5. **URL 확인**
   ```
   상단에 녹색 체크 표시와 함께 URL 표시:
   https://username.github.io/survey-system/
   ```

### 2-4. 접속 URL 정리

**메인 접속 URL (QR 코드용):**
```
https://username.github.io/survey-system/login.html
```

**기타 페이지:**
```
설문 목록: https://username.github.io/survey-system/survey-list.html
관리자:   https://username.github.io/survey-system/admin.html
설문:     https://username.github.io/survey-system/survey.html
```

⚠️ **주의**: 반드시 `login.html`로 시작해야 합니다!

---

## 3. QR 코드 생성

### ⏱️ 소요 시간: 약 2분

### 방법 1: 온라인 생성기 (권장)

1. **QR Code Generator 접속**
   ```
   https://www.qr-code-generator.com/
   ```

2. **URL 입력**
   ```
   https://username.github.io/survey-system/login.html
   ```
   (본인의 실제 GitHub Pages URL)

3. **Create QR Code** 클릭

4. **다운로드**
   - **Download** 버튼 클릭
   - PNG 또는 JPG 선택
   - 크기: 300x300 이상 권장

5. **인쇄**
   - 사내 게시판에 부착
   - A4 용지 중앙에 배치 권장

### 방법 2: Google Charts API

**즉시 생성 URL:**
```
https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=https://username.github.io/survey-system/login.html
```

- 브라우저에 위 URL 입력
- 이미지 우클릭 → 다른 이름으로 저장

### 방법 3: Python 코드 (개발자용)

```python
pip install qrcode[pil]

import qrcode

url = "https://username.github.io/survey-system/login.html"
qr = qrcode.make(url)
qr.save("survey_qr.png")
```

---

## 4. 테스트 및 확인

### 4-1. 로컬 테스트 (배포 전)

1. **login.html 열기**
   ```
   C:\Users\2025winUJYRFJHLOO46\.claude\login.html
   더블클릭 → 브라우저에서 열림
   ```

2. **테스트 데이터 입력**
   ```
   성명: 홍길동
   전화번호: 010-1234-5678
   ```

3. **제출**
   - "설문조사 시작하기" 클릭
   - survey-list.html로 이동 확인

4. **설문 작성**
   - 진행 중인 설문 클릭
   - 답변 입력 후 제출

5. **Google Sheets 확인**
   - 스프레드시트 열기
   - "설문조사 응답" 시트 확인
   - 데이터가 저장되었는지 확인

### 4-2. 온라인 테스트 (배포 후)

1. **GitHub Pages URL 접속**
   ```
   https://username.github.io/survey-system/login.html
   ```

2. **동일하게 테스트**
   - 로그인 → 설문 선택 → 응답 작성 → 제출

3. **모바일 테스트**
   - 스마트폰으로 QR 코드 스캔
   - 또는 URL 직접 입력
   - 모바일 레이아웃 확인

### 4-3. 관리자 테스트

1. **login.html 접속**

2. **관리자 로그인**
   ```
   성명: 관리자
   전화번호: 010-0000-0000
   ✅ "관리자로 로그인" 체크
   비밀번호: admin1234
   ```

3. **관리자 대시보드 확인**
   - 통계 확인
   - 설문 목록 확인
   - 상태 변경 테스트

### 4-4. 최종 체크리스트

- [ ] Google Apps Script URL이 survey.html에 정확히 입력됨
- [ ] GitHub Pages가 정상 작동함
- [ ] QR 코드가 올바른 URL을 가리킴
- [ ] 모바일에서 정상 작동함
- [ ] Google Sheets에 데이터가 정상 저장됨
- [ ] 관리자 로그인이 작동함

---

## 5. 문제 해결

### ❌ 문제 1: "제출 중 오류가 발생했습니다"

**원인:**
- Google Apps Script URL이 잘못되었거나
- Apps Script 배포 권한이 잘못됨

**해결 방법:**
1. survey.html의 `GOOGLE_SCRIPT_URL` 값 확인
2. URL 끝이 `/exec`로 끝나는지 확인
3. Apps Script 배포 시 **"모든 사용자"** 권한으로 배포했는지 확인
4. 다시 배포:
   ```
   Apps Script → 배포 → 배포 관리
   → 연필 아이콘 → 새 버전 → 배포
   ```

### ❌ 문제 2: GitHub Pages URL이 작동하지 않음

**원인:**
- Pages가 활성화되지 않았거나
- 배포가 완료되지 않음

**해결 방법:**
1. Settings → Pages에서 녹색 체크 확인
2. 배포 상태 확인:
   ```
   저장소 → Actions 탭 → 최근 workflow 확인
   ```
3. 파일명 확인:
   - `login.html` (정확한 대소문자)
   - 공백이나 특수문자 없는지 확인

### ❌ 문제 3: "데모 모드입니다" 메시지가 나옴

**원인:**
- survey.html에 Apps Script URL을 입력하지 않음

**해결 방법:**
1. survey.html 파일 열기 (GitHub에서 또는 로컬)
2. 217번째 줄 확인:
   ```javascript
   const GOOGLE_SCRIPT_URL = 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE';
   ```
3. 실제 URL로 교체:
   ```javascript
   const GOOGLE_SCRIPT_URL = 'https://script.google.com/.../exec';
   ```

### ❌ 문제 4: 모바일에서 레이아웃이 깨짐

**원인:**
- 브라우저 캐시 문제

**해결 방법:**
1. 페이지 새로고침 (Ctrl+F5 또는 캐시 삭제)
2. 시크릿 모드로 접속
3. 다른 브라우저로 시도

### ❌ 문제 5: Google Sheets에 시트가 생성되지 않음

**원인:**
- Apps Script가 실행되지 않음
- 권한 문제

**해결 방법:**
1. Apps Script 에디터 → 실행 기록 확인
2. 오류 메시지 확인
3. 수동으로 시트 생성:
   ```
   하단 "+" 버튼 클릭
   시트 이름: "설문조사 응답"
   ```

### ❌ 문제 6: CORS 오류

**브라우저 콘솔에 빨간색 오류:**
```
Access to fetch at '...' from origin '...' has been blocked by CORS policy
```

**원인:**
- Google Apps Script 배포 권한 문제

**해결 방법:**
1. Apps Script 재배포
2. **반드시** "모든 사용자" 권한으로 배포
3. 새 배포 URL 사용

---

## 📞 추가 지원

### Google Apps Script 로그 확인

1. Apps Script 에디터 열기
2. 좌측 메뉴 → **"실행 기록"** 클릭
3. 최근 실행 내역 및 오류 확인

### 브라우저 콘솔 확인

```
F12 키 누르기
→ Console 탭 선택
→ 빨간색 오류 메시지 확인
```

### 유용한 링크

- **Tailwind CSS**: https://tailwindcss.com/docs
- **Google Apps Script**: https://developers.google.com/apps-script
- **GitHub Pages**: https://docs.github.com/pages
- **Material Icons**: https://fonts.google.com/icons

---

## 🎯 다음 단계

설정이 완료되었다면:

1. ✅ 실제 설문 질문으로 변경
2. ✅ 회사 로고 추가
3. ✅ 색상 테마 커스터마이징
4. ✅ QR 코드 배포 및 홍보

---

*최종 수정: 2024년 12월*
*작성: Claude Code*
