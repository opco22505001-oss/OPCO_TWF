# 설문조사 시스템 구축 작업 일지

## 📅 프로젝트 개요

**목적**: 회사 내부용 웹 기반 설문조사 시스템 구축
**기간**: 2024년 12월
**배포 방식**: QR 코드 (사내 접근)
**기술 스택**: HTML/CSS/JavaScript (프론트엔드), Google Sheets/Apps Script (백엔드)

---

## 🎨 1단계: 디자인 (Stitch 활용)

### 작업 내용
1. **Stitch**에서 설문조사 UI 디자인 생성
2. 2개의 HTML 페이지 생성:
   - **login.html**: 로그인/본인확인 페이지 (성명, 전화번호 입력)
   - **survey.html**: 설문조사 페이지 (질문 3개 샘플)

### 디자인 특징
- **Tailwind CSS** 사용
- **Material Icons** (Google Icons)
- 반응형 디자인 (모바일/태블릿/PC 지원)
- 다크모드 지원
- 현대적이고 깔끔한 UI

---

## 🔧 2단계: 기능 구현 (Claude Code)

### 2-1. login.html 수정

**추가된 기능:**
- ✅ 관리자 로그인 체크박스
- ✅ 관리자 비밀번호 입력란 (체크 시 표시)
- ✅ 자동 전화번호 포맷팅 (010-1234-5678)
- ✅ 유효성 검사
- ✅ localStorage에 사용자 정보 저장
- ✅ 사용자 유형에 따른 페이지 분기
  - 일반 사용자 → `survey-list.html`
  - 관리자 → `admin.html`

**관리자 비밀번호**: `admin1234` (데모용)

**주요 코드:**
```javascript
// 관리자 체크 시 비밀번호 입력란 표시
function toggleAdminPassword() {
    const isAdmin = document.getElementById('isAdmin').checked;
    const adminPasswordDiv = document.getElementById('adminPasswordDiv');

    if (isAdmin) {
        adminPasswordDiv.classList.remove('hidden');
        submitBtnText.textContent = '관리자 대시보드로 이동';
    } else {
        adminPasswordDiv.classList.add('hidden');
        submitBtnText.textContent = '설문조사 시작하기';
    }
}
```

**파일 위치**: `C:\Users\2025winUJYRFJHLOO46\.claude\login.html`

---

### 2-2. survey.html 수정

**추가된 기능:**
- ✅ Google Apps Script URL 연동
- ✅ localStorage에서 사용자 정보 읽기
- ✅ 진행률 표시 (Progress Bar)
- ✅ 실시간 유효성 검사
- ✅ 문자수 카운터 (주관식 질문)
- ✅ 설문 응답 데이터 Google Sheets로 전송

**Google Apps Script URL 설정:**
```javascript
const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzMyANPSIrXF_qV6bFbr7avJzqqSJxMwpyKjOXcb4C4FhM49r3s4w6NHOz1HlkyuRpw/exec';
```

**샘플 질문:**
1. 우리 플랫폼을 얼마나 자주 사용하시나요? (객관식)
2. 1~10점 척도로 추천 의향은? (평점)
3. 추가되었으면 하는 기능은? (주관식)

**파일 위치**: `C:\Users\2025winUJYRFJHLOO46\.claude\survey.html`

---

### 2-3. survey-list.html 생성 (신규)

**기능:**
- ✅ 설문조사 목록 카드 형식 표시
- ✅ 상태별 필터링 (전체/진행중/예정/마감)
- ✅ 6개 샘플 설문조사
- ✅ 진행 중인 설문만 클릭 가능
- ✅ 로그아웃 기능

**샘플 설문조사:**
1. 2024년 고객 만족도 조사 (진행중)
2. 구내식당 메뉴 만족도 조사 (진행중)
3. IT 시스템 개선 의견 (진행중)
4. 신년 복지 혜택 수요 조사 (예정)
5. 사무환경 개선 의견 조사 (마감)
6. 하반기 워크샵 의견 조사 (마감)

**디자인 특징:**
- 상태별 색상 구분 (진행중: 초록색, 예정: 파란색, 마감: 회색)
- 카드 호버 효과
- 반응형 그리드 레이아웃 (1/2/3열)

**파일 위치**: `C:\Users\2025winUJYRFJHLOO46\.claude\survey-list.html`

---

### 2-4. admin.html 생성 (신규)

**기능:**
- ✅ 통계 대시보드 (전체/진행중/예정/마감 카운트)
- ✅ 설문조사 목록 테이블
- ✅ 상태 변경 드롭다운
- ✅ 설문 수정/삭제/응답보기 버튼
- ✅ Google Sheets 바로가기
- ✅ 데이터 내보내기 기능 (예정)
- ✅ 통계 리포트 생성 (예정)

**주요 기능:**
```javascript
// 상태 변경
function changeStatus(select, surveyId) {
    const status = select.value;
    // Google Sheets API 호출 예정
    alert(`상태가 "${statusLabels[status]}"로 변경되었습니다.`);
}
```

**파일 위치**: `C:\Users\2025winUJYRFJHLOO46\.claude\admin.html`

---

### 2-5. google-apps-script.js 작성

**기능:**
- ✅ POST 요청 처리 (설문 응답 저장)
- ✅ Google Sheets에 자동으로 시트 생성
- ✅ 헤더 자동 생성 및 스타일링
- ✅ 한국 시간 변환
- ✅ 중복 응답 확인 함수 (선택사항)
- ✅ 통계 생성 함수 (선택사항)

**주요 코드:**
```javascript
function doPost(e) {
    const data = JSON.parse(e.postData.contents);
    const spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
    let sheet = spreadsheet.getSheetByName('설문조사 응답');

    if (!sheet) {
        sheet = spreadsheet.insertSheet('설문조사 응답');
        // 헤더 추가 및 스타일링
    }

    sheet.appendRow([
        koreanTime,
        data.name,
        data.phone,
        data.frequency,
        data.recommendation,
        data.featureRequest
    ]);
}
```

**파일 위치**: `C:\Users\2025winUJYRFJHLOO46\.claude\google-apps-script.js`

---

## 📊 3단계: Google Sheets 연동

### 3-1. Google Sheets 생성

1. [Google Sheets](https://sheets.google.com) 접속
2. 새 스프레드시트 생성
3. 이름: **"설문조사 응답"**

### 3-2. Apps Script 배포

1. 스프레드시트 → 확장 프로그램 → Apps Script
2. `google-apps-script.js` 코드 복사 → 붙여넣기
3. 파일명: `설문조사.gs` (자동으로 .gs 확장자)
4. 저장 (Ctrl+S)

### 3-3. 웹 앱으로 배포

**배포 설정:**
- 유형: 웹 앱
- 실행 계정: 나
- **액세스 권한: 모든 사용자** ⚠️ 중요!

**배포 URL:**
```
https://script.google.com/macros/s/AKfycbzMyANPSIrXF_qV6bFbr7avJzqqSJxMwpyKjOXcb4C4FhM49r3s4w6NHOz1HlkyuRpw/exec
```

### 3-4. survey.html에 URL 추가

**수정 위치**: 217번째 줄
```javascript
const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz.../exec';
```

### 3-5. 데이터 구조

**저장되는 데이터:**

| 제출시간 | 성명 | 전화번호 | 사용빈도 | 추천점수 | 기능제안 |
|---------|-----|---------|---------|---------|---------|
| 2024-12-15 14:30:25 | 홍길동 | 010-1234-5678 | 하루에 한 번 | 8 | 다크모드 추가 |

---

## 🌐 4단계: GitHub Pages 배포

### 4-1. GitHub 저장소 생성

1. [GitHub](https://github.com) 로그인
2. **New repository** 클릭
3. 저장소 이름: `survey-system` (예시)
4. **Public** 선택
5. **Create repository**

### 4-2. 파일 업로드

**업로드한 파일:**
```
저장소/
├── login.html          (수정됨 - 관리자 로그인 기능)
├── survey-list.html    (신규 - 설문 목록)
├── admin.html          (신규 - 관리자 대시보드)
└── survey.html         (수정됨 - Apps Script 연동)
```

**업로드 방법:**
1. 저장소 → **Add file** → **Upload files**
2. 파일 드래그 앤 드롭
3. **Commit changes**

### 4-3. GitHub Pages 활성화

1. 저장소 → **Settings** → **Pages**
2. **Source**: Branch: main, Folder: / (root)
3. **Save**
4. 2-3분 대기 → URL 생성

### 4-4. 배포된 URL

**접속 주소:**
```
https://username.github.io/survey-system/login.html
https://username.github.io/survey-system/survey-list.html
https://username.github.io/survey-system/admin.html
https://username.github.io/survey-system/survey.html
```

⚠️ **중요**: 반드시 `login.html`로 시작!

---

## 🎯 5단계: 테스트

### 5-1. 일반 사용자 플로우

```
1. login.html 접속
   ↓
2. 성명: 홍길동, 전화번호: 010-1234-5678 입력
   ↓
3. "설문조사 시작하기" 클릭
   ↓
4. survey-list.html로 이동 (설문 목록)
   ↓
5. "2024년 고객 만족도 조사" 클릭
   ↓
6. survey.html로 이동 (설문 작성)
   ↓
7. 답변 작성 후 "제출하기" 클릭
   ↓
8. Google Sheets에 데이터 저장됨 ✅
```

### 5-2. 관리자 플로우

```
1. login.html 접속
   ↓
2. 성명: 관리자, 전화번호: 010-0000-0000
   ✅ "관리자로 로그인" 체크
   비밀번호: admin1234 입력
   ↓
3. "관리자 대시보드로 이동" 클릭
   ↓
4. admin.html로 이동 (관리자 대시보드)
   ↓
5. 통계 확인, 설문 상태 변경, 응답 보기 등
```

### 5-3. 데이터 확인

**Google Sheets에서:**
1. 스프레드시트 열기
2. 하단에 **"설문조사 응답"** 시트 자동 생성
3. 각 응답이 한 행씩 추가됨

**확인된 데이터:**
- ✅ 제출시간 (한국 시간)
- ✅ 성명
- ✅ 전화번호
- ✅ 설문 응답 내용

---

## 🔧 추가 논의 사항

### SQL Server 활용 방안 (회사 인프라)

**현재 회사 환경:**
- ERP: C# 기반
- DevExpress 19.2
- SQL Server 2008

**제안된 아키텍처:**

```
┌─────────────────┐
│ GitHub Pages    │  ← 일반 사용자 (모바일)
│ (HTML/JS)       │
└────────┬────────┘
         │ HTTPS
         ↓
┌─────────────────┐
│ C# ASP.NET      │  ← 백엔드 API 서버
│ Web API         │
└────────┬────────┘
         │ SQL
         ↓
┌─────────────────┐
│ SQL Server 2008 │  ← 데이터베이스
└─────────────────┘
         ↑
         │ 직접 연결
┌─────────────────┐
│ DevExpress      │  ← 관리자 앱 (사내 PC)
│ WinForms/WPF    │
└─────────────────┘
```

**장점:**
- ✅ 회사 기존 기술 스택 활용
- ✅ 강력한 DevExpress UI 컴포넌트
- ✅ SQL Server의 뛰어난 성능
- ✅ 내부망 보안 강화
- ✅ 기존 팀의 기술 숙련도 활용

**필요한 작업:**
1. C# ASP.NET Web API 개발
2. SQL Server 테이블 생성
3. DevExpress 관리자 앱 개발
4. IIS 서버 배포

---

## 📁 파일 구조

### 로컬 파일
```
C:\Users\2025winUJYRFJHLOO46\.claude\
├── login.html                  (로그인 페이지)
├── survey-list.html            (설문 목록)
├── admin.html                  (관리자 대시보드)
├── survey.html                 (설문조사 페이지)
├── google-apps-script.js       (Apps Script 코드)
├── SETUP_GUIDE.md              (설정 가이드)
└── README.md                   (프로젝트 개요)
```

### GitHub 저장소
```
survey-system/
├── login.html
├── survey-list.html
├── admin.html
└── survey.html
```

---

## 🚀 다음 단계 (TODO)

### 즉시 가능
- [ ] QR 코드 생성 및 인쇄
- [ ] 실제 설문 질문으로 변경
- [ ] 회사 로고 추가
- [ ] 색상 테마 커스터마이징

### Google Sheets 방식 개선
- [ ] 설문조사 목록을 Sheets로 관리
- [ ] Apps Script에 CRUD API 추가
- [ ] 동적으로 설문 불러오기
- [ ] 중복 응답 방지

### SQL Server 전환 (장기)
- [ ] SQL Server 테이블 설계
- [ ] C# ASP.NET Web API 개발
- [ ] DevExpress 관리자 앱 개발
- [ ] 회사 IIS 서버 배포

---

## 💡 핵심 교훈

### 성공 요인
1. ✅ **Stitch 활용**: 빠른 UI 디자인
2. ✅ **Google Sheets**: 무료 백엔드/DB
3. ✅ **GitHub Pages**: 무료 호스팅
4. ✅ **점진적 개선**: 데모 → 실제 기능

### 개선 포인트
1. 🔄 **설문 목록 동적화**: 현재는 하드코딩, Sheets로 관리 필요
2. 🔄 **관리자 기능 실제 구현**: 현재는 alert() 데모
3. 🔄 **보안 강화**: 관리자 비밀번호 암호화
4. 🔄 **성능 최적화**: 대용량 응답 처리

---

## 📞 기술 지원

### 문제 발생 시
1. 브라우저 콘솔 확인 (F12)
2. Google Apps Script 로그 확인
3. GitHub Pages 배포 상태 확인

### 참고 자료
- [Tailwind CSS Docs](https://tailwindcss.com/docs)
- [Google Apps Script Guide](https://developers.google.com/apps-script)
- [GitHub Pages Docs](https://docs.github.com/pages)

---

## 📊 프로젝트 통계

**작업 시간**: 약 3-4시간
**생성된 파일**: 7개
**코드 라인 수**: 약 2,000줄
**총 비용**: **₩0** (완전 무료)

---

## 🎉 완료!

**배포 주소**: `https://username.github.io/survey-system/login.html`
**QR 코드**: [생성 예정]
**관리자 비밀번호**: `admin1234`

---

*작성일: 2024년 12월*
*작성: Claude Code*
*버전: 1.0*
